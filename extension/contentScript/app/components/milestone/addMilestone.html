<script type="text/ng-template" id="MilestoneModalTmpl">

<div class="modal-header">
  <img alt="Close modal" class="close-modal" src="/extension/contentScript/app/images/close_x.png" ng-click="closeModal()" />
  <div class="modal-title">Add a New Milestone</div>
</div>

<form name="form" ng-submit="submit()">

  <div class="modal-body row">

      <div class="col-sm-7">

        <h2>
          Milestone
          <img tooltip="help message" alt="help" src="/extension/contentScript/app/images/icon_help.png">
        </h2> 

        <div class="form-group">
          <input type="text" class="form-control" required
                 placeholder="Name of the new milestone" ng-model="milestoneModel.title" />
          <label>Title</label>
        </div>

        <div class="form-group">
          <textarea class="form-control" required
                 placeholder="Describe the milestone" ng-model="milestoneModel.description"></textarea>
          <label>Content</label>
        </div>

        <contributions-table contributions="milestoneModel.contributions" active-contribution="activeContribution"></contributions-table>

      </div>  

      <div class="col-sm-5">

        <div class="stat">
          <div class="stat-item">
            <img class="stat-icon" alt="Tokens" src="/extension/contentScript/app/images/tokens.png" />
            <div class="stat-data">{{totalValue | number:0}} <small>{{tokenCode}}</small></div>
          </div>
          <div class="stat-label">Value of all contributions</div>
        </div>

        <div class="milestone-contributers">
          <img alt="help" class="pull-right" src="/extension/contentScript/app/images/icon_help.png"
               tooltip="All contributers to current milestone" />
          <h5>Contributers ({{ contributersCount }})</h5>

          <ul class="contributers-list list-unstyled">
            <li ng-repeat="contributer in milestoneModel.contributers" class="milestone-contributer flex">

              <div class="contributer-image">
                <img class="img-circle" ng-src="{{contributer.url}}" alt="{contributer.real_name}}" />
                <span class="contributer-percentage">{{contributer.contributer_percentage | number:0}}%</span>
              </div>

              <div class="contributer-names">
                <div class="contributer-realname">{{contributer.real_name}}</div>
                <div class="contributer-username"><svg-icon icon="slack"></svg-icon>&nbsp;&nbsp;{{contributer.name}}</div>
              </div>

            </li>
          </ul>
        </div>

      </div>

  </div>

  <div class="modal-footer flex">
    <div class="milestone-destination-project">
      <select class="select-backfeed" ng-model="milestoneModel.evaluatingTeam">
        <option value="" selected>Destination Project</option>
        <option ng-repeat="team in teams" value="{{ team.id }}">{{ team.channelName }}</option>
      </select>
      <img alt="help" class="pull-right" src="/extension/contentScript/app/images/icon_help.png"
           tooltip="All contributers to current milestone" style="margin-left: 25px;"/>
    </div>
    <button type="submit" class="btn btn-backfeed submit-button"
            ng-disabled="form.$invalid || milestoneModel.evaluatingTeam === ''">Submit Milestone</button>
  </div>

</form>


</script>